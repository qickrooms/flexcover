<?xml version="1.0"?>
<mx:Canvas xmlns:mx="http://www.adobe.com/2006/mxml" textAlign="center" horizontalScrollPolicy="off">
    <mx:Script>
        <![CDATA[
            import com.allurent.coverage.model.SegmentModel;
            import mx.formatters.NumberFormatter;

        private static var formatter:NumberFormatter = createFormatter();
        
        private static function createFormatter():NumberFormatter
        {
            var f:NumberFormatter = new NumberFormatter();
            f.precision = 2;
            return f;
        }
        
        override public function set data(value:Object):void
        {
            var coverage:Number = Number(value.coverage);
            var happyColor:uint = 0x00FF00 + ((1- coverage) * 0xFF) + (uint((1 - coverage) * 0xFF) << 16);
            var warningColor:uint = 0xFF0000 + (coverage * 0xFF) + (uint(coverage * 0xFF) << 8)
            greenBar.setStyle("backgroundColor", happyColor);
            setStyle("backgroundColor", warningColor);
            coverageLabel.text = formatter.format(coverage * 100) + "%";
            greenBar.percentWidth = coverage * 100;
        }
        
        public function set model(s:SegmentModel):void
        {
            data = s;
        }
        ]]>
    </mx:Script>
    
    <mx:Canvas id="greenBar" backgroundColor="#00FF00" height="100%"/> 
    <mx:Label id="coverageLabel" width="100%" textAlign="center"/>
</mx:Canvas>
